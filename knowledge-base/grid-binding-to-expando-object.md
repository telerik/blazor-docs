---
title: Bind Grid to Expando Object
description: How to bind a Blazor Grid to a dynamic ExpandoObject and generate columns at runtime.
type: how-to
page_title: Bind Grid to Expando Object
slug: grid-kb-binding-to-expando-object
position: 
tags: 
ticketid: 1577265
res_type: kb
---


## Environment

<table>
    <tbody>
        <tr>
            <td>Product</td>
            <td>Grid for Blazor, <br /> TreeList for Blazor</td>
        </tr>
    </tbody>
</table>


## Description

How to bind Grid to Expando object?

How to use the Grid with dynamic model type and dynamic columns?


## Solution

The key points of the required implementation are:

* Set the Grid `Data` parameter to a `IEnumerable<ExpandoObject>`.
* Set the [`FieldType`]({%slug components/grid/columns/bound%}#data-binding) parameter of all [bound columns]({%slug components/grid/columns/bound%}).
* If you need [autogenerated Grid columns]({%slug grid-columns-automatically-generated%}), then [define them in a loop inside the `<GridColumns>` tag]({%slug grid-kb-dynamic-columns-with-static%}), which is a standard Blazor `RenderFragment`.
* If the Grid columns are created from the keys of *first* data item, they will disappear when adding a new item. This is because the newly added data item (`ExpandoObject`) has no properties and is *prepended* to the `Data` collection. To avoid this, either create columns from a non-first item, or use [`OnModelInit`]({%slug grid-events%}#onmodelinit) to populate the newly added item with some default values.
* The Grid clones data items during editing. When editing, you can store the original item in the [Grid `OnEdit` handler]({%slug components/grid/editing/overview%}#events). This will make the retrieval of the original item easier later in `OnUpdate` (example below).

> It is possible to use [nested Grid model properties]({%slug grid-use-navigation-properties%}) that are `ExpandoObject`s. However, data operations like filtering, sorting and grouping are not supported for those nested properties. [Disable these features per column]({%slug components/grid/columns/bound%}#data-operations) if they are enabled for the Grid.

In addition to the sample below, there is a [complete runnable project in GitHub](https://github.com/telerik/blazor-ui/tree/master/grid/binding-to-expando-object).

>caption Grid data operations with ExpandoObject

````CSHTML
@using System.Dynamic

<TelerikGrid Data="@GridData"
             Pageable="true"
             Sortable="true"
             FilterMode="@GridFilterMode.FilterRow"
             EditMode="@GridEditMode.Incell"
             OnEdit="@OnGridEdit"
             OnUpdate="@OnGridUpdate"
             OnCreate="@OnGridCreate">
    <GridToolBar>
        <GridCommandButton Command="Add" Icon="add">Add Item</GridCommandButton>
    </GridToolBar>
    <GridColumns>
        @{
            @* dynamic columns *@

            if (GridData != null && GridData.Any())
            {
                var firstDataItem = (IDictionary<string, object>)GridData.First();

                foreach (var item in firstDataItem)
                {
                    if (item.Key != "Id")
                    {
                        <GridColumn Field="@item.Key" FieldType="@item.Value.GetType()" @key="@item.Key"></GridColumn>
                    }
                }
            }
        }

        @* or static columns *@

        @*<GridColumn Field="PropertyInt" Title="Int Column" FieldType="@typeof(int)" />
            <GridColumn Field="PropertyString" Title="String Column" FieldType="@typeof(string)" />
            <GridColumn Field="PropertyDate" Title="DateTime Column" FieldType="@typeof(DateTime)" />*@
    </GridColumns>
</TelerikGrid>

@code {
    private List<ExpandoObject> GridData { get; set; } = new List<ExpandoObject>();

    private IDictionary<string, object> GridEditItem { get; set; }

    private async Task OnGridEdit(GridCommandEventArgs args)
    {
        GridEditItem = (IDictionary<string, object>)args.Item;
    }

    private async Task OnGridUpdate(GridCommandEventArgs args)
    {
        var item = (IDictionary<string, object>)args.Item;

        // the handler shows how to update a stored data item, or find it on the fly
        @*IDictionary<string, object> originalItem = GridData.Find(x =>
        {
            return ((IDictionary<string, object>)x)["Id"] == item["Id"];
        });*@

        // incell editing - update one property
        @*originalItem[args.Field] = item[args.Field];*@
        GridEditItem[args.Field] = item[args.Field];

        // inline or popup editing - update all properties
        @*foreach (string key in item.Keys)
        {
            //originalItem[key] = item[key];
            GridEditItem[key] = item[key];
        }*@
    }

    private async Task OnGridCreate(GridCommandEventArgs args)
    {
        var item = args.Item as ExpandoObject;

        ((IDictionary<string, object>)item)["Id"] = GridData.Count + 1;

        GridData.Insert(0, item);
    }

    protected override async Task OnInitializedAsync()
    {
        for (int i = 1; i <= 15; i++)
        {
            dynamic expando = new ExpandoObject();

            expando.Id = i;
            expando.PropertyInt = i;
            expando.PropertyString = "String " + i;
            expando.PropertyDate = DateTime.Now.AddMonths(-i);

            GridData.Add(expando);
        }
    }
}
````


## See Also

* [How to create dynamic Grid columns in a loop]({%slug grid-kb-dynamic-columns-with-static%})
* [How to bind Grid columns to nested model properties]({%slug grid-use-navigation-properties%})
